<!DOCTYPE html>
<!--
    About test shells: "../../../../../internal/docs/shells/README.md"
-->
<html class="sapUShellFullHeight">
<head>
    <meta charset="utf-8" />

    <title>Fiori Launchpad CDM local</title>

    <!-- Hardcoded min theme to allow for better performance -->
    <link id="sap-ui-theme-sap.ui.core" href="https://ui5.sap.com/resources/sap/ui/core/themes/sap_horizon/library.css" rel="stylesheet" />
    <link id="sap-ui-theme-sap.m" href="https://ui5.sap.com/resources/sap/m/themes/sap_horizon/library.css" rel="stylesheet" />
    <!-- Update themes dynamically for RTL -->
    <script src="https://ui5.sap.com/test-resources/sap/ushell/shells/applyRtlToCssLinks.js"></script>

    <meta name="sap.ushellConfig.crossPlatformDefaults" content='{
        "ushell": {
            "spaces": {
                "enabled": true
            },
            "contentProviders": {
                "providerInfo": {
                    "enabled": true
                }
            }
        },
        "renderers": {
            "fiori2": {
                "componentData": {
                    "config": {
                        "sessionTimeoutIntervalInMinutes": 30,
                        "sessionTimeoutReminderInMinutes": 25,
                        "sizeBehaviorConfigurable": true,
                        "enableSearch": true,
                        "enableFeaturePolicyInIframes": false
                    }
                }
            }
        },
        "services": {
            "PluginManager": { "config": { "loadPluginsFromSite": true } },
            "UserInfo": {
                "adapter": {
                    "module": "sap.ushell.adapters.local.UserInfoAdapter",
                    "config": {
                        "availableLocales": [
                            "en",
                            ""
                        ],
                        "availableThemes": [
                            "sap_belize",
                            "sap_fiori_3",
                            "sap_fiori_3_dark",
                            "sap_horizon",
                            "sap_horizon_dark",
                            "sap_horizon_hcb",
                            "sap_horizon_hcw"
                        ],
                        "themes": [
                            { "id": "sap_belize", "name": "SAP Belize", "root": "" },
                            { "id": "sap_fiori_3", "name": "SAP Quartz Light", "root": "" },
                            { "id": "sap_fiori_3_dark", "name": "SAP Quartz Dark", "root": "" },
                            { "id": "sap_horizon", "name": "SAP Morning Horizon", "root": "" },
                            { "id": "sap_horizon_dark", "name": "SAP Evening Horizon", "root": "" },
                            { "id": "sap_horizon_hcb", "name": "SAP HCB (SAP Horizon)", "root": "" },
                            { "id": "sap_horizon_hcw", "name": "SAP HCW (SAP Horizon)", "root": "" }
                        ]
                    }
                }
            },
            "AppState": {
                "config": {
                "persistentWhenShared": true
                }
            },
            "Container": {
                "adapter": {
                    "config": {
                        "systemProperties": { "logoutUrl": "/sap/public/bc/icf/logoff" },
                        "userProfile": {
                            "metadata": {
                                "editablePropterties": [
                                    "accessibility",
                                    "contentDensity",
                                    "theme"
                                ],
                                "ranges": {
                                    "theme": {
                                        "sap_horizon": { "displayName": "SAP Morning Horizon", "themeRoot": "" },
                                        "sap_horizon_dark": { "displayName": "SAP Evening Horizon", "themeRoot": "" },
                                        "sap_horizon_hcb": { "displayName": "SAP HCB (SAP Horizon)", "themeRoot": "" },
                                        "sap_horizon_hcw": { "displayName": "SAP HCW (SAP Horizon)", "themeRoot": "" }
                                    }
                                }
                            },
                            "defaults": {
                                "email": "john.doe@sap.com",
                                "firstName": "John",
                                "lastName": "Doe",
                                "fullName": "John Doe",
                                "id": "DOEJ",
                                "language": "EN",
                                "languageBcp47": "en",
                                "sapDateFormat": "1",
                                "tislcal": [],
                                "numberFormat": "",
                                "rtl": false,
                                "sapTimeFormat": "0",
                                "timeZone": "CET"
                            }
                        },
                        "userProfilePersonalization": {
                            "sapDateFormat": "1",
                            "theme": "sap_horizon",
                            "sapTimeFormat": "0",
                            "timeZone": "CET",
                            "contentDensity": "cozy"
                        }
                    }
                }
            },
            "CommonDataModel": {
                "adapter": {
                    "config": {
                        "ignoreSiteDataPersonalization": true,
                        "siteDataUrl": "cdm-local.json",
                        "allowSiteSourceFromURLParameter": true
                    }
                }
            },
            "NavTargetResolution": {
                "adapter": { "config": { "siteDataUrl": "../../cdmSiteData/3.0/CDMForIsolation2.json" } }
            },
            "LaunchPage": { "adapter": { "module": "sap.ushell.adapters.cdm.v3.FlpLaunchPageAdapter" } },
            "Search": { "adapter": { "module": "sap.ushell.adapters.local.SearchAdapter" } },
            "SearchCEP": { "adapter": { "module": "sap.ushell.adapters.cep.SearchCEPAdapter" } },
            "Ui5ComponentLoader": { "config": { "loadDefaultDependencies": false } },
            "SupportTicket": {
                "config": { "enabled": true },
                "adapter": { "module": "sap.ushell.adapters.local.SupportTicketAdapter" }
            }
        },
        "bootstrapPlugins": {
            "AppBeforeCloseEventPlugin": {
                "component": "sap.ushell.demo.AppBeforeCloseEvent",
                "url": "https://ui5.sap.com/test-resources/sap/ushell/demoapps/AppBeforeCloseEvent"
            },
            "YellowBoxPlugin": {
                "component": "sap.ushell.demo.BootstrapPluginSample.CFLPPluginsSample.yellowBoxPlugin",
                "url": "https://ui5.sap.com/test-resources/sap/ushell/demoapps/BootstrapPluginSample/CFLPPluginsSample/YellowBoxPlugin",
                "enabled": true,
                "config": {
                    "sap-plugin-agent": true,
                    "sap-plugin-agent-id": "BlueBoxPlugin"
                }
            }
        }
    }' />
    <script>
        // loadCdmCustomConfig.js
        // Copyright (c) 2009-2023 SAP SE, All Rights Reserved
        function getUrlParams () {
            "use strict";
            var vars = {};
            window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
                vars[key] = value;
            });
            return vars;
        }

        var sConfigFileUrl = decodeURIComponent(getUrlParams().configFileUrl);

        var oXHR = new XMLHttpRequest();
        if (sConfigFileUrl !== "undefined") {
            oXHR.open("GET", sConfigFileUrl, false);
            oXHR.onreadystatechange = function () {
                "use strict";
                if (this.status === 200 && this.readyState === 4) {
                    var oConfig = JSON.parse(oXHR.responseText);

                    var oNewMetaElement = document.createElement("meta");
                    oNewMetaElement.setAttribute("name", oConfig.name);
                    oNewMetaElement.content = JSON.stringify(oConfig.content);
                    document.head.appendChild(oNewMetaElement);
                }
            };
            oXHR.send();
        }
    </script>
    <script id="sap-ui-bootstrap"
            src="https://ui5.sap.com/resources/sap/ushell/bootstrap/cdm.js"
            data-sap-ui-compatVersion="edge"
            data-sap-ui-theme="sap_horizon"
            data-sap-ui-async="true">
    </script>
</head>
<body class="sapUiBody">
<div id="canvas">
    <div class="sapMShellBG sapUiGlobalBackgroundImage"></div>
</div>
</body>
</html>
